environment:
  matrix:
  - nodejs_version: ''
  - nodejs_version: 7
  - nodejs_version: 6
  - nodejs_version: 4

install:
  - ps: Install-Product node $env:nodejs_version
  - npm i -g npm@3
  - npm install
  - set CI=true

test_script:
  - ver
  - node --version
  - npm --version
  - ps: if ($env:nodejs_version -like '') { npm run lint }
  - ps: |
      node bin/cli.js
      if ($LASTEXITCODE -ge 2) { Write-Output "Exit status: $LASTEXITCODE"; exit $LASTEXITCODE } else { Write-Output "All good" }

build: off
shallow_clone: true
clone_depth: 1
version: '{build}'
matrix:
  fast_finish: true
